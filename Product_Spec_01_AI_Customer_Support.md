# Product Spec 01: 企业私有化 AI 知识库与客服助手 (旗舰版)

> **基于梁宁“真需求”理论分析**：本产品针对企业“服务效率低、知识流失快、数据安全焦虑”的三重痛点，提供一套**私有化、全天候、可成长的企业大脑解决方案**。

---

## 1. 产品定义 (Product Definition)

### 1.1 一句话描述 (Elevator Pitch)
为中小企业（SaaS/电商/教培）打造的**私有化 AI 业务中台**，它不仅是 7x24 小时秒回客户的超级客服，更是能听懂业务指令的自动化执行官。

### 1.2 核心价值主张 (Value Proposition)
* **痛点 (Pain - 恐惧)**：
    * **失去客户**：夜间/节假日无人回复，客户流失给竞争对手。
    * **成本失控**：每增加一个人工客服，成本增加 5-8k/月，且培训周期长，离职率高。
    * **数据裸奔**：使用公有云 AI（如 ChatGPT Plus），企业核心数据（报价、客户名单）可能外泄。
* **爽点 (Pleasure - 即时满足)**：
    * **0 秒响应**：客户无论何时提问，立刻得到准确回复。
    * **不仅能聊，还能做**：聊到“退款”自动触发 n8n 流程，无需人工介入。
* **差异化竞争优势**：
    * 相比 **Intercom/Zendesk**：我们数据私有，支持 DeepSeek 等高性价比模型，成本仅为 SaaS 的 1/10。
    * 相比 **ChatGPT Wrapper**：我们具备 RAG（精准知识库）+ n8n（业务执行力），是“脑+手”的结合。

---

## 2. 用户画像 (User Persona)

### 2.1 核心用户 (大明 - 需求清晰)
* **角色 A：SaaS/软件公司 CEO**
    * **场景**：用户天天问“这个功能怎么用”、“报错了怎么办”。
    * **现有方案**：养 3 个技术支持，每天复制粘贴文档链接。
    * **痛点**：技术支持如果不在线，客户就骂街；技术支持离职，知识就带走了。
* **角色 B：跨境电商卖家**
    * **场景**：由于时差，客户咨询都在半夜。
    * **现有方案**：雇佣倒班客服，或者第二天早上回复（客户早跑了）。
    * **痛点**：时差就是金钱流失。

### 2.2 用户体验地图 (User Experience Map)

| 阶段 | 触点 | 用户情绪 | 现有土办法 | AI 产品机会点 |
| :--- | :--- | :--- | :--- | :--- |
| **咨询产生** | 官网/WhatsApp | 期待/焦急 | 人工轮班/自动回复(智障) | **24/7 在线，秒级响应** |
| **问题解答** | 对话窗口 | 疑惑 -> 失望 | 客服翻文档 -> 复制粘贴 | **RAG 精准检索，直接给答案+引用** |
| **业务办理** | 填表/支付 | 麻烦 | 发送链接 -> 跳转填写 | **Agent 自动调用 n8n 完成登记/查询** |
| **服务结束** | 评价/复购 | 平淡 | 无后续 | **自动打标线索，推送到 CRM** |

### 2.3 企业组织与权限模型 (Org & Permissions)

- **企业 (Company / Tenant)**：
  - 每个客户公司作为一个“租户”，例如公司 E；
  - 该公司下可以有多位用户（A、B、C），共享同一套业务知识与工作流。

- **企业内共享 vs 个人私有**：
  - 默认情况下：
    - A 在公司 E 中上传的产品手册/FAQ，**企业内其他成员（如 B）可以正常搜索和使用**；
  - 同时保留“个人私有空间”：
    - A 的个人草稿/笔记可以设置为仅自己可见，用于试验性 Prompt、内部备忘。

- **角色分层（示意）**：
  - 企业管理员：创建/管理企业级知识库、渠道接入、n8n 工作流；
  - 业务负责人：维护本产品线相关文档与 FAQ；
  - 一线客服：主要使用对话界面，不直接改配置；
  - 平台方（你）：作为全局管理员，可以跨企业查看整体使用情况与模型消耗，用于运维和优化（不会向其他客户暴露具体内容）。

> 这一组织与权限模型，为后续的“多企业、多账号、多项目”的扩展打下基础，同时保证：**企业内高效协作，企业间严格隔离**。

---

## 3. 场景与功能架构

### 3.1 核心场景
1.  **对外：全能客服 Bot**
    *   能力：基于产品手册、FAQ、过往工单，回答 95% 的重复性问题。
    *   特色：支持多语言（自动翻译）、支持多渠道（Web/WhatsApp）。
2.  **对内：新员工培训助教**
    *   能力：基于公司 SOP、合规文档，回答“发票怎么开”、“请假怎么走”。
    *   特色：私有部署，敏感数据不出内网。

### 3.2 技术架构 (The Stack)

```mermaid
graph TD
    User[用户/客户] -->|HTTPS| NPM[Nginx Proxy Manager]

    NPM -->|Web Chat| FastGPT[FastGPT (前台对话壳)]
    NPM -->|高级对话/管理| HuiceUI[huice chat-ui & admin-ui]

    subgraph "Private AI Infrastructure"
        FastGPT -->|LLM & Embedding| SF[SiliconFlow
DeepSeek-V3 + Qwen3-Embedding]
        HuiceCore[huice RAG & Agent
rag-core + agent-service + MCP] -->|LLM & Embedding| SF

        FastGPT -. 高级场景 HTTP .-> HuiceCore
        n8n -. Webhook / HTTP .-> HuiceCore

        FastGPT -->|业务触发| n8n[n8n (Hands & Automation)]
        n8n -->|Action| CRM[HubSpot/CRM]
        n8n -->|Notify| Slack[Slack/飞书]
    end
```

---

## 4. 实施路线图 (Implementation Roadmap)

### Phase 1: MVP - 止血（解决“痛点”）
* **目标**：1 周内上线，替代 80% 的人工重复答疑，确保夜间有响应。
* **实施步骤**：
    1.  **基础设施**：部署 FastGPT + OneAPI + NPM（已完成）。
    2.  **知识清洗**：收集客户现有的 PDF/Word/URL，清洗整理为 Markdown。
    3.  **模型调优**：配置 Prompt（人设：金牌客服），调试温度与搜索阈值。
    4.  **嵌入官网**：提供 JS 脚本，嵌入客户网站右下角。
* **交付物**：一个可用的 Web Chatbot，后台账号。

### Phase 2: 渠道集成 - 提效（提供“爽点”）
* **目标**：打通客户最常用的沟通渠道（如 WhatsApp, 微信公众号, Slack）。
* **实施步骤**：
    1.  **模型网关配置**：
        *   统一在 SiliconFlow 中配置 DeepSeek-V3 + Qwen 等模型，作为主力推理与向量引擎；
        *   如有需要，可选用 OneAPI 作为多云模型路由层（非必需）。
    2.  **API 对接**：使用 FastGPT 的 API 接口，对接第三方 IM 平台（WhatsApp/微信公众号/Slack 等）。
    3.  **微调**：根据首月对话日志，优化知识库（补充 Bad Case），必要时通过 huice 的图谱/评估能力分析“知识盲区”。
* **交付物**：多渠道统一回复平台，月度对话质量分析报告。

### Phase 3: 业务闭环 - 增值（满足“痒点”）
* **目标**：从“问答”升级为“办事”，让 AI 产生直接收益。
* **实施步骤**：
    1.  **n8n 集成**：编写 n8n 工作流（如：留资 -> 写入 CRM -> 发邮件），统一作为“业务手脚”。
    2.  **工具调用 / 高级智能**：
        *   在 FastGPT 中配置“工具调用”，让 Bot 能触发 n8n Webhook；
        *   对于复杂场景（如跨文档分析、项目级报告生成），通过 FastGPT 或 n8n 调用 huice Agent API，由 huice 完成深度推理，再将结果回写给业务系统。
    3.  **数据看板**：
        *   汇总 FastGPT + huice + n8n 的数据，展示“AI 节省时长”、“AI 留资数量”、“自动完成的业务请求数”等 ROI 指标。
* **交付物**：全自动业务流，ROI 仪表盘。

### Phase 4: 企业多租户 & 分组织管理（Pro 版）

* **目标**：支持一个平台服务多家企业，每家企业内部多账号协作、跨企业强隔离。
* **实施步骤（规划阶段）**：
    1.  在产品数据模型中引入 `tenant_id`（企业）、`user_id`（用户）、`visibility`（私有/企业内/全局）的概念；
    2.  在 huice 平台中优先实现：单实例多企业的 RAG + Agent 能力，支持“公司内共享知识库，跨公司隔离”；
    3.  与 FastGPT 的空间/应用概念、n8n 的工作流配置结合，实现按企业划分的工作流与报表；
    4.  增加企业管理员视角的看板（仅查看本公司的汇总数据），以及平台方的全局运维面板。
* **交付物（规划）**：多企业管理后台、按企业维度的使用与费用统计、企业级权限配置界面。

---

## 5. 交付标准与物料清单

1.  **核心系统**：
    *   FastGPT 实例（含账号、知识库数据）。
    *   huice 平台（rag-core + agent-service + chat-ui + admin-ui），作为高级 RAG + Agent 智能内核。
    *   SiliconFlow 账号与模型配置（DeepSeek-V3 + Qwen3-Embedding 等），OneAPI 作为可选的多云模型路由层。
2.  **文档包**：
    *   《AI 客服管理后台操作手册》.pdf
    *   《知识库维护 SOP - 如何让 AI 越用越聪明》.md
    *   《API 接入文档》.md
3.  **运维服务**：
    *   每日自动备份知识库。
    *   服务器安全加固（UFW, SSL）。

---

## 6. 附录：为什么这是“真需求”？

*   **高频**：客户咨询每天都在发生，不可避免。
*   **刚需**：不回消息 = 丢单；回得慢 = 体验差。
*   **付费意愿**：对比人工成本（5000元/月/人），本系统维护费仅需 500-1000元/月，ROI 极高。
